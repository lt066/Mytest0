package com.example.activity;

import java.util.HashMap;

import android.annotation.SuppressLint;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;


import cn.smssdk.EventHandler;
import cn.smssdk.SMSSDK;
import cn.smssdk.gui.RegisterPage;

import com.example.mytest0.BaseActivity;
import com.example.mytest0.R;

public class SMSCode_Activity extends BaseActivity implements OnClickListener{
	
	private EditText phone_Text;
	
	@Override
	@SuppressLint("NewApi")
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		setContentView(R.layout.smscode_activity);
		findViewById(R.id.sendSmsCode).setOnClickListener(this);
		phone_Text=(EditText) findViewById(R.id.phone);
	}

	@Override
	protected Context getActivityContext() {
		// TODO Auto-generated method stub
		return this;
	}

	@Override
	protected String getActivityName() {
		// TODO Auto-generated method stub
		return "发送短信验证码";
	}

	@Override
	public void onClick(View v) {
		// TODO Auto-generated method stub
		if(v.getId()==R.id.sendSmsCode)
		{
			//打开注册页面
			RegisterPage registerPage = new RegisterPage();
			registerPage.setRegisterCallback(new EventHandler() {
			public void afterEvent(int event, int result, Object data) {
			// 解析注册结果
				if (result == SMSSDK.RESULT_COMPLETE) {
					@SuppressWarnings("unchecked")
					HashMap<String,Object> phoneMap = (HashMap<String, Object>) data;
					String country = (String) phoneMap.get("country");
					String phone = (String) phoneMap.get("phone"); 

			// 提交用户信息
					registerUser(country, phone);
					}
				}
			});
			registerPage.show(getActivityContext());
		}
	}

}
